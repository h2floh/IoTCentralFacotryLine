apiVersion: 2018-06-01
location: '$(iotfactorygermany_location)'
name: GermanyFactory
properties:
  containers:
  - name: production-line-a
    properties:
      environmentVariables:
        - name: 'DEVICE_CERTIFICATE'
          value: '$(cert_germany_lineA)'
        - name: 'DPS_IDSCOPE'
          value: '$(IoTCentralDPS_ScopeID)'
        - name: 'PASSWORD'
          secureValue: '$(password_germany_lineA)'
      image: '$(iotfactorycontainerImageToDeploy)'
      resources:
        requests:
          cpu: 0.5
          memoryInGb: 0.5
  - name: production-line-b
    properties:
      environmentVariables:
        - name: 'DEVICE_CERTIFICATE'
          value: '$(cert_germany_lineB)'
        - name: 'DPS_IDSCOPE'
          value: '$(IoTCentralDPS_ScopeID)'
        - name: 'PASSWORD'
          secureValue: '$(password_germany_lineB)'
      image: '$(iotfactorycontainerImageToDeploy)'
      resources:
        requests:
          cpu: 0.5
          memoryInGb: 0.5
  osType: Linux
  imageRegistryCredentials:
  - server: '$(imageRegistryServer)'
    username: '$(imageRegistryUsername)'
    password: '$(imageRegistryPassword)'
tags: null
type: Microsoft.ContainerInstance/containerGroups